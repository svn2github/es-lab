var whitelist;
(function(){whitelist={cajaVM:{log:true,compile:true,compileModule:true,def:true},Q:{get:true,post:true,put:true,"delete":true,when:true,defer:true,reject:true,ref:true,near:true,defined:true,run:true,Promise:true,isPromise:true,def:true},WeakMap:true,Proxy:{create:true,createFunction:true},escape:true,unescape:true,Object:{getPropertyDescriptor:true,getPropertyNames:true,identical:true,prototype:{constructor:"*",toString:"*",toLocaleString:"*",valueOf:true,hasOwnProperty:true,isPrototypeOf:true,propertyIsEnumerable:true},
getPrototypeOf:true,getOwnPropertyDescriptor:true,getOwnPropertyNames:true,create:true,defineProperty:true,defineProperties:true,seal:true,freeze:true,preventExtensions:true,isSealed:true,isFrozen:true,isExtensible:true,keys:true},NaN:true,Infinity:true,undefined:true,eval:true,parseInt:true,parseFloat:true,isNaN:true,isFinite:true,decodeURI:true,decodeURIComponent:true,encodeURI:true,encodeURIComponent:true,Function:{prototype:{apply:true,call:true,bind:true,prototype:"*",length:"*",caller:"skip",
arguments:"skip",arity:"skip",name:"skip"}},Array:{prototype:{concat:true,join:true,pop:true,push:true,reverse:true,shift:true,slice:true,sort:true,splice:true,unshift:true,indexOf:true,lastIndexOf:true,every:true,some:true,forEach:true,map:true,filter:true,reduce:true,reduceRight:true,length:"skip"},isArray:true},String:{prototype:{substr:true,anchor:true,big:true,blink:true,bold:true,fixed:true,fontcolor:true,fontsize:true,italics:true,link:true,small:true,strike:true,sub:true,sup:true,trimLeft:true,
trimRight:true,valueOf:true,charAt:true,charCodeAt:true,concat:true,indexOf:true,lastIndexOf:true,localeCompare:true,match:true,replace:true,search:true,slice:true,split:true,substring:true,toLowerCase:true,toLocaleLowerCase:true,toUpperCase:true,toLocaleUpperCase:true,trim:true,length:"skip"},fromCharCode:true},Boolean:{prototype:{valueOf:true}},Number:{prototype:{valueOf:true,toFixed:true,toExponential:true,toPrecision:true},MAX_VALUE:true,MIN_VALUE:true,NaN:true,NEGATIVE_INFINITY:true,POSITIVE_INFINITY:true},
Math:{E:true,LN10:true,LN2:true,LOG2E:true,LOG10E:true,PI:true,SQRT1_2:true,SQRT2:true,abs:true,acos:true,asin:true,atan:true,atan2:true,ceil:true,cos:true,exp:true,floor:true,log:true,max:true,min:true,pow:true,random:true,round:true,sin:true,sqrt:true,tan:true},Date:{prototype:{getYear:true,setYear:true,toGMTString:true,toDateString:true,toTimeString:true,toLocaleString:true,toLocaleDateString:true,toLocaleTimeString:true,getTime:true,getFullYear:true,getUTCFullYear:true,getMonth:true,getUTCMonth:true,
getDate:true,getUTCDate:true,getDay:true,getUTCDay:true,getHours:true,getUTCHours:true,getMinutes:true,getUTCMinutes:true,getSeconds:true,getUTCSeconds:true,getMilliseconds:true,getUTCMilliseconds:true,getTimezoneOffset:true,setTime:true,setFullYear:true,setUTCFullYear:true,setMonth:true,setUTCMonth:true,setDate:true,setUTCDate:true,setHours:true,setUTCHours:true,setMinutes:true,setUTCMinutes:true,setSeconds:true,setUTCSeconds:true,setMilliseconds:true,setUTCMilliseconds:true,toUTCString:true,toISOString:true,
toJSON:true},parse:true,UTC:true,now:true},RegExp:{prototype:{exec:true,test:true,source:"skip",global:"skip",ignoreCase:"skip",multiline:"skip",lastIndex:"skip",sticky:"skip"}},Error:{prototype:{name:"*",message:"*"}},EvalError:{prototype:true},RangeError:{prototype:true},ReferenceError:{prototype:true},SyntaxError:{prototype:true},TypeError:{prototype:true},URIError:{prototype:true},JSON:{parse:true,stringify:true}}})();var atLeastFreeVarNames;
(function(){var t=/(\w|\$)+/gm;atLeastFreeVarNames=function(m){m=String(m);if(!/^[\u0000-\u007f]*$/m.test(m))throw Error("Non-ascii texts not yet supported");for(var u=Object.create(null),p;p=t.exec(m);){p=p[0];if(p==="ident___")throw new EvalError('Apparent identifier "ident___" not permitted');u[p]=true}return u}})();var WeakMap;
(function(t){function m(a,c,h){if(!(c in a)){s(a,c,{value:h,writable:true,enumerable:false,configurable:true});if(a===Object)o[c]=h}}function u(a,c){switch(arguments.length){case 0:return v();case 1:return v(a);default:return v(a,c)}}function p(a){var c;if(a===Object(a)){if(D.call(a,"ident___"))return a.ident___;if(!o.isExtensible(a))return F;c="hash:"+Math.random();c=o.freeze([c]);s(a,"ident___",{value:c,writable:false,enumerable:false,configurable:false});return c}if(typeof a==="string")return"str:"+
a;return"lit:"+a}function w(a,c){var h=a[c];s(a,c,{value:function(q){p(q);return h.apply(this,arguments)}})}function z(a){Object.freeze(a.prototype);return Object.freeze(a)}var y=Object.getOwnPropertyNames;if(!y){debugger;throw new EvalError("Please upgrade to a JavaScript platform which implements Object.getOwnPropertyName");}var D=Object.prototype.hasOwnProperty,A=Array.prototype.slice,H=Array.prototype.push,s=Object.defineProperty,o={};y(Object).forEach(function(a){o[a]=Object[a]});var v=RegExp;
u.prototype=v.prototype;u.prototype.constructor=u;t.RegExp=u;var E=RegExp.prototype.exec,B=RegExp.prototype.test;RegExp.prototype.exec=function(a){return E.call(this,String(a))};RegExp.prototype.test=function(a){return B.call(this,String(a))};m(Object,"freeze",function(a){return a});m(Object,"seal",function(a){return a});m(Object,"preventExtensions",function(a){return a});m(Object,"isFrozen",function(){return false});m(Object,"isSealed",function(){return false});m(Object,"isExtensible",function(){return true});
m(Function.prototype,"bind",function(a){function c(){var b=q.concat(A.call(arguments,0));return h.apply(a,b)}var h=this,q=A.call(arguments,1);delete c.prototype;return c});m(Object,"getPropertyDescriptor",function(a,c){for(;a!==null;){var h=o.getOwnPropertyDescriptor(a,c);if(h)return h;a=o.getPrototypeOf(a)}});m(Object,"getPropertyNames",function(a){for(var c=[];a!==null;){H.apply(c,y(a));a=o.getPrototypeOf(a)}return c});m(Object,"identical",function(a,c){return a===c?a!==0||1/a===1/c:a!==a&&c!==
c});if(typeof WeakMap!=="function"){var F="noident:0";w(Object,"freeze");w(Object,"seal");w(Object,"preventExtensions");w(Object,"defineProperty");w(Object,"defineProperties");s(Object,"getOwnPropertyNames",{value:function(a){a=y(a);var c=a.indexOf("ident___");c>=0&&a.splice(c,1);return a}});s(Object,"getPropertyNames",{value:function(a){a=o.getPropertyNames(a);var c=a.indexOf("ident___");c>=0&&a.splice(c,1);return a}});s(Object,"getOwnPropertyDescriptor",{value:function(a,c){if(c!=="ident___")return o.getOwnPropertyDescriptor(a,
c)}});s(Object,"getPropertyDescriptor",{value:function(a,c){if(c!=="ident___")return o.getPropertyDescriptor(a,c)}});s(Object,"create",{value:function(a,c){var h=o.create(a);p(h);c&&o.defineProperties(h,c);return h}});if(WeakMap===undefined)WeakMap=z(function(){var a={},c={};return Object.freeze({get:z(function(h){var q=p(h),b;if(typeof q==="string"){b=q;q=h}else b=q[0];h=(a[b]||[]).indexOf(q);return h<0?undefined:c[b][h]}),set:z(function(h,q){if(h!==Object(h))throw new TypeError("Key must not be a value type: "+
h);var b=p(h),e;if(typeof b==="string"){e=b;b=h}else e=b[0];var f=a[e]||(a[e]=[]);e=c[e]||(c[e]=[]);var k=f.indexOf(b);if(k<0)k=f.length;f[k]=b;e[k]=q})})})}})(this);
function startSES(t,m,u){function p(b){debugger;throw new EvalError(b);}function w(b,e){var f=Object.getOwnPropertyDescriptor(b,e);if(f&&"value"in f&&!f.writable&&!f.configurable)return f.value;f=b[e];try{Object.defineProperty(b,e,{value:f,writable:false,configurable:false})}catch(k){E.push({base:b,name:e,err:k})}return f}function z(b,e){if(b===Object(b))if(typeof e==="object")if(B.get(b))debugger;else{B.set(b,e);Object.keys(e).forEach(function(f){if(e[f]!=="skip"){var k=w(b,f);z(k,e[f])}})}}function y(b,
e){if(b===Object(b))if(!F.get(b)){F.set(b,true);Object.getOwnPropertyNames(b).forEach(function(f){var k=e+(e?".":"")+f,l;a:{l=b;var r=B.get(l);if(r)if(r[f]){l=r[f];break a}for(;;){l=Object.getPrototypeOf(l);if(l===null){l=false;break a}if((r=B.get(l))&&f in r){l=r[f];l=l==="*"||l==="skip"?l:false;break a}}l=void 0}if(l)if(l==="skip")a.push(k);else{f=w(b,f);y(f,k)}else{var C;try{C=delete b[f]}catch(J){debugger;C=false}if(C)c.push(k);else{debugger;h.push(k)}}});b!==A&&Object.freeze(b)}}function D(b,
e){if(e.length===0)return false;cajaVM.log(b+": "+e.sort().join(" "));return true}var A=Array.prototype.forEach,H=true,s=true,o=true;typeof WeakMap==="undefined"&&p("No built-on WeakMaps, so WeakMap.js must be loaded first");var v=Object.create(null);(function(){function b(d){try{C('"use strict"; throw "NotASyntaxError"; '+d)}catch(j){if(j!=="NotASyntaxError")throw j;}}function e(d){b(d+";");b("( "+d+"\n);")}function f(d,j){for(var n in d){var i=Object.getOwnPropertyDescriptor(d,n);if(i){i.enumerable=
false;i.configurable=true;Object.defineProperty(j,n,i)}}}function k(d,j){var n=Object.create(d),i;for(i in j)i in d||function(g){Object.defineProperty(n,g,{get:function(){throw new ReferenceError('"'+g+'" not in scope');},set:function(){throw new TypeError("Can't set \""+g+'"');},enumerable:true})}(i);return Object.freeze(n)}function l(d){o&&p("Initial cleaning failed");e(d);var j=u(d),n=C('(function() {   with (this) {     return function() {       "use strict";       return (         '+d+"\n      );\n    };\n  }\n})");
return function(i){var g=Object.create(null);f(v,g);f(i,g);i=Object.freeze(g);g=k(i,j);return n.call(g).call(i)}}function r(){var d=[].slice.call(arguments,0),j=d.pop();j=String(j||"");d=d.join(",");return l("(function("+d+"\n){"+j+"})")({})}var C=eval,J=/^['"](?:\w|\s)*['"]$/m,L=/^(?:\w*\s*(?:\w|\$|\.)*\s*=\s*)?\s*require\s*\(\s*['"]((?:\w|\$|\.|\/)+)['"]\s*\)$/m;r.prototype=Function.prototype;r.prototype.constructor=r;t.Function=r;t.eval=function(d){try{e(d)}catch(j){d="(function() {"+d+"\n}).call(this)"}return l(d)({})};
var K=WeakMap();t.cajaVM={log:function(d){typeof console!=="undefined"&&typeof console.log==="function"&&console.log(d)},compile:l,compileModule:function(d){var j=l("(function() {"+d+"}).call(this)"),n;n=[];d=d.split(";");for(var i,g=0,x=d.length;g<x;g++){i=d[g].trim();if(i!=="")if(!J.test(i))break}for(;g<x;g++){i=d[g].trim();if(i!==""){i=L.exec(i);if(!i)break;n.push(i[1])}}n=Object.freeze(n);j.requirements=n;Object.freeze(j.prototype);return Object.freeze(j)},def:function(d){function j(g){if(!(g!==
Object(g)||K.get(g)||n.get(g))){n.set(g,true);i.push(g);Object.freeze(g);j(Object.getPrototypeOf(g));Object.getOwnPropertyNames(g).forEach(function(x){if(!(typeof g==="function"&&(x==="caller"||x==="arguments"))){var G=Object.getOwnPropertyDescriptor(g,x);if(!G){if(s)return;p("missing descriptor: "+x)}try{j(G.value);j(G.get);j(G.set)}catch(I){if(H&&I instanceof TypeError)cajaVM.log("still diagnosing("+x+"): "+I);else throw I;}}})}}var n=WeakMap(),i=[];j(d);i.forEach(function(g){K.set(g,true)});return d}}})();
var E=[];Object.keys(m).forEach(function(b){var e=Object.getOwnPropertyDescriptor(t,b);if(e)if(m[b]){var f=w(t,b);Object.defineProperty(v,b,{value:f,writable:false,enumerable:e.enumerable,configurable:false})}});var B=WeakMap();z(v,m);var F=WeakMap(),a=[],c=[],h=[];A&&Object.freeze(A);y(v,"");D("Deleted",c);if(E.length>=1){var q=E.map(function(b){var e=Object.getPropertyDescriptor(b.base,b.name);if(!e)return"  Missing "+b.name;return b.name+"("+b.err+"): "+Object.getOwnPropertyNames(e).map(function(f){var k=
e[f];if(k===Object(k))k="a "+typeof k;return f+": "+k}).join(", ")});D("Can't neuter",q)}if(!D("Can't delete",h)){cajaVM.log("success");o=false}}(function(){startSES(window,whitelist,atLeastFreeVarNames)})();