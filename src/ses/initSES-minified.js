{var WeakMap,atLeastFreeVarNames,whitelist;(function(){var t=true,s='skip';whitelist={'cajaVM':{'log':t,'compile':t,'compileModule':t,'def':t},'Q':{'get':t,'post':t,'put':t,'delete':t,'when':t,'defer':t,'reject':t,'ref':t,'near':t,'defined':t,'run':t,'Promise':t,'isPromise':t,'def':t},'WeakMap':t,'Proxy':{'create':t,'createFunction':t},'escape':t,'unescape':t,'Object':{'getPropertyDescriptor':t,'getPropertyNames':t,'identical':t,'prototype':{'constructor':'*','toString':'*','toLocaleString':'*','valueOf':t,'hasOwnProperty':t,'isPrototypeOf':t,'propertyIsEnumerable':t},'getPrototypeOf':t,'getOwnPropertyDescriptor':t,'getOwnPropertyNames':t,'create':t,'defineProperty':t,'defineProperties':t,'seal':t,'freeze':t,'preventExtensions':t,'isSealed':t,'isFrozen':t,'isExtensible':t,'keys':t},'NaN':t,'Infinity':t,'undefined':t,'eval':t,'parseInt':t,'parseFloat':t,'isNaN':t,'isFinite':t,'decodeURI':t,'decodeURIComponent':t,'encodeURI':t,'encodeURIComponent':t,'Function':{'prototype':{'apply':t,'call':t,'bind':t,'prototype':'*','length':'*','caller':s,'arguments':s,'arity':s,'name':s}},'Array':{'prototype':{'concat':t,'join':t,'pop':t,'push':t,'reverse':t,'shift':t,'slice':t,'sort':t,'splice':t,'unshift':t,'indexOf':t,'lastIndexOf':t,'every':t,'some':t,'forEach':t,'map':t,'filter':t,'reduce':t,'reduceRight':t,'length':s},'isArray':t},'String':{'prototype':{'substr':t,'anchor':t,'big':t,'blink':t,'bold':t,'fixed':t,'fontcolor':t,'fontsize':t,'italics':t,'link':t,'small':t,'strike':t,'sub':t,'sup':t,'trimLeft':t,'trimRight':t,'valueOf':t,'charAt':t,'charCodeAt':t,'concat':t,'indexOf':t,'lastIndexOf':t,'localeCompare':t,'match':t,'replace':t,'search':t,'slice':t,'split':t,'substring':t,'toLowerCase':t,'toLocaleLowerCase':t,'toUpperCase':t,'toLocaleUpperCase':t,'trim':t,'length':s},'fromCharCode':t},'Boolean':{'prototype':{'valueOf':t}},'Number':{'prototype':{'valueOf':t,'toFixed':t,'toExponential':t,'toPrecision':t},'MAX_VALUE':t,'MIN_VALUE':t,'NaN':t,'NEGATIVE_INFINITY':t,'POSITIVE_INFINITY':t},'Math':{'E':t,'LN10':t,'LN2':t,'LOG2E':t,'LOG10E':t,'PI':t,'SQRT1_2':t,'SQRT2':t,'abs':t,'acos':t,'asin':t,'atan':t,'atan2':t,'ceil':t,'cos':t,'exp':t,'floor':t,'log':t,'max':t,'min':t,'pow':t,'random':t,'round':t,'sin':t,'sqrt':t,'tan':t},'Date':{'prototype':{'getYear':t,'setYear':t,'toGMTString':t,'toDateString':t,'toTimeString':t,'toLocaleString':t,'toLocaleDateString':t,'toLocaleTimeString':t,'getTime':t,'getFullYear':t,'getUTCFullYear':t,'getMonth':t,'getUTCMonth':t,'getDate':t,'getUTCDate':t,'getDay':t,'getUTCDay':t,'getHours':t,'getUTCHours':t,'getMinutes':t,'getUTCMinutes':t,'getSeconds':t,'getUTCSeconds':t,'getMilliseconds':t,'getUTCMilliseconds':t,'getTimezoneOffset':t,'setTime':t,'setFullYear':t,'setUTCFullYear':t,'setMonth':t,'setUTCMonth':t,'setDate':t,'setUTCDate':t,'setHours':t,'setUTCHours':t,'setMinutes':t,'setUTCMinutes':t,'setSeconds':t,'setUTCSeconds':t,'setMilliseconds':t,'setUTCMilliseconds':t,'toUTCString':t,'toISOString':t,'toJSON':t},'parse':t,'UTC':t,'now':t},'RegExp':{'prototype':{'exec':t,'test':t,'source':s,'global':s,'ignoreCase':s,'multiline':s,'lastIndex':s,'sticky':s}},'Error':{'prototype':{'name':'*','message':'*'}},'EvalError':{'prototype':t},'RangeError':{'prototype':t},'ReferenceError':{'prototype':t},'SyntaxError':{'prototype':t},'TypeError':{'prototype':t},'URIError':{'prototype':t},'JSON':{'parse':t,'stringify':t}}})(),(function(){var
SHOULD_MATCH_IDENTIFIER;function LIMIT_SRC(programSrc){if(!/^[\u0000-\u007f]*$/m.test(programSrc))throw new
Error('Non-ascii texts not yet supported')}SHOULD_MATCH_IDENTIFIER=/(\w|\$)+/gm,atLeastFreeVarNames=function
atLeastFreeVarNames(programSrc){var a,name,result;programSrc=String(programSrc),LIMIT_SRC(programSrc),result=Object.create(null);while(a=SHOULD_MATCH_IDENTIFIER.exec(programSrc)){name=a[0];if(name==='ident___')throw new
EvalError('Apparent identifier \"ident___\" not permitted');result[name]=true}return result}})(),(function(global){var
gopn=Object.getOwnPropertyNames,NO_IDENT,UnsafeRegExp,classProp,defProp,hop,push,real,slice,unsafeRegExpExec,unsafeRegExpTest;if(!gopn){debugger;throw new
EvalError('Please upgrade to a JavaScript platform which implements Object.getOwnPropertyName')}hop=Object.prototype.hasOwnProperty,slice=Array.prototype.slice,push=Array.prototype.push,defProp=Object.defineProperty,classProp=Object.prototype.toString,real={},gopn(Object).forEach(function(name){real[name]=Object[name]});function
defMissingProp(base,name,missingFunc){name in base||(defProp(base,name,{'value':missingFunc,'writable':true,'enumerable':false,'configurable':true}),base===Object&&(real[name]=missingFunc))}function
identical(x,y){return x===y?x!==0||1/x===1/y:x!==x&&y!==y}UnsafeRegExp=RegExp;function
FakeRegExp(pattern,flags){switch(arguments.length){case 0:return UnsafeRegExp();case
1:return UnsafeRegExp(pattern);default:return UnsafeRegExp(pattern,flags)}}FakeRegExp.prototype=UnsafeRegExp.prototype,FakeRegExp.prototype.constructor=FakeRegExp,global.RegExp=FakeRegExp,unsafeRegExpExec=RegExp.prototype.exec,unsafeRegExpTest=RegExp.prototype.test,RegExp.prototype.exec=function(specimen){return unsafeRegExpExec.call(this,String(specimen))},RegExp.prototype.test=function(specimen){return unsafeRegExpTest.call(this,String(specimen))},defMissingProp(Object,'freeze',function(obj){return obj}),defMissingProp(Object,'seal',function(obj){return obj}),defMissingProp(Object,'preventExtensions',function(obj){return obj}),defMissingProp(Object,'isFrozen',function(obj){return false}),defMissingProp(Object,'isSealed',function(obj){return false}),defMissingProp(Object,'isExtensible',function(obj){return true}),defMissingProp(Function.prototype,'bind',function(self,var_args){var
thisFunc=this,leftArgs=slice.call(arguments,1);function funcBound(var_args){var args=leftArgs.concat(slice.call(arguments,0));return thisFunc.apply(self,args)}return delete
funcBound.prototype,funcBound}),defMissingProp(Object,'getPropertyDescriptor',function(obj,name){var
result;while(obj!==null){result=real.getOwnPropertyDescriptor(obj,name);if(result)return result;obj=real.getPrototypeOf(obj)}return undefined}),defMissingProp(Object,'getPropertyNames',function(obj){var
result=[];while(obj!==null)push.apply(result,gopn(obj)),obj=real.getPrototypeOf(obj);return result}),defMissingProp(Object,'identical',identical);if(typeof
WeakMap==='function')return;NO_IDENT='noident:0';function identity(key){var name,result;return key===Object(key)?hop.call(key,'ident___')?key.ident___:real.isExtensible(key)?(name='hash:'+Math.random(),result=real.freeze([name]),defProp(key,'ident___',{'value':result,'writable':false,'enumerable':false,'configurable':false}),result):NO_IDENT:(typeof
key==='string'?'str:':'lit:')+key}function identifyFirst(base,name){var oldFunc=base[name];defProp(base,name,{'value':function(obj,var_args){return identity(obj),oldFunc.apply(this,arguments)}})}identifyFirst(Object,'freeze'),identifyFirst(Object,'seal'),identifyFirst(Object,'preventExtensions'),identifyFirst(Object,'defineProperty'),identifyFirst(Object,'defineProperties'),defProp(Object,'getOwnPropertyNames',{'value':function(obj){var
result=gopn(obj),i=result.indexOf('ident___');return i>=0&&result.splice(i,1),result}}),defProp(Object,'getPropertyNames',{'value':function(obj){var
result=real.getPropertyNames(obj),i=result.indexOf('ident___');return i>=0&&result.splice(i,1),result}}),defProp(Object,'getOwnPropertyDescriptor',{'value':function(obj,name){return name==='ident___'?undefined:real.getOwnPropertyDescriptor(obj,name)}}),defProp(Object,'getPropertyDescriptor',{'value':function(obj,name){return name==='ident___'?undefined:real.getPropertyDescriptor(obj,name)}}),defProp(Object,'create',{'value':function(parent,pdmap){var
result=real.create(parent);return identity(result),pdmap&&real.defineProperties(result,pdmap),result}});function
constFunc(func){return Object.freeze(func.prototype),Object.freeze(func)}WeakMap===undefined&&(WeakMap=constFunc(function(){var
identities={},values={};return Object.freeze({'get':constFunc(function(key){var id=identity(key),i,ids,name;return typeof
id==='string'?(name=id,id=key):(name=id[0]),ids=identities[name]||[],i=ids.indexOf(id),i<0?undefined:values[name][i]}),'set':constFunc(function(key,value){var
i,id,ids,name,vals;if(key!==Object(key))throw new TypeError('Key must not be a value type: '+key);id=identity(key),typeof
id==='string'?(name=id,id=key):(name=id[0]),ids=identities[name]||(identities[name]=[]),vals=values[name]||(values[name]=[]),i=ids.indexOf(id),i<0&&(i=ids.length),ids[i]=id,vals[i]=value})})}))})(this);function
startSES(global,whitelist,atLeastFreeVarNames){var REQUIRE_STRICT=false,FREEZE_EARLY=Array.prototype.forEach,TOLERATE_FAILED_FREEZE=true,TOLERATE_MISSING_DESCRIPTOR=true,dirty=true,badDeletions,cantNeuter,cleaning,complaint,goodDeletions,root,skipped,whiteTable;function
fail(str){debugger;throw new EvalError(str)}typeof WeakMap==='undefined'&&fail('No built-on WeakMaps, so WeakMap.js must be loaded first'),REQUIRE_STRICT&&(function(){return this})()&&fail('Requires at least ES5 support'),root=Object.create(null),(function(){var
unsafeEval=eval,UnsafeFunction=Function,defended,directivePattern,requirePattern;function
verifyStrictProgram(programSrc){try{unsafeEval('\"use strict\"; throw \"NotASyntaxError\"; '+programSrc)}catch(ex){if(ex!=='NotASyntaxError')throw ex}}function
verifyStrictExpression(exprSrc){verifyStrictProgram(exprSrc+';'),verifyStrictProgram('( '+exprSrc+'\n);')}function
initGlobalProperties(from,virtualGlobal){var desc,name;for(name in from)desc=Object.getOwnPropertyDescriptor(from,name),desc&&(desc.enumerable=false,desc.configurable=true,Object.defineProperty(virtualGlobal,name,desc))}function
makeVirtualGlobal(env){var virtualGlobal=Object.create(null);return initGlobalProperties(root,virtualGlobal),initGlobalProperties(env,virtualGlobal),Object.freeze(virtualGlobal)}function
makeScopeObject(virtualGlobal,freeNames){var scopeObject=Object.create(virtualGlobal),name;for(name
in freeNames)name in virtualGlobal||(function(name){Object.defineProperty(scopeObject,name,{'get':function(){throw new
ReferenceError('\"'+name+'\" not in scope')},'set':function(ignored){throw new TypeError('Can\'t set \"'+name+'\"')},'enumerable':true})})(name);return Object.freeze(scopeObject)}function
compile(exprSrc){var freeNames,wrapper,wrapperSrc;return dirty&&fail('Initial cleaning failed'),verifyStrictExpression(exprSrc),freeNames=atLeastFreeVarNames(exprSrc),wrapperSrc='(function() {   with (this) {     return function() {       \"use strict\";       return (         '+exprSrc+'\n'+'      );\n'+'    };\n'+'  }\n'+'})',wrapper=unsafeEval(wrapperSrc),function(env){var
virtualGlobal=makeVirtualGlobal(env),scopeObject=makeScopeObject(virtualGlobal,freeNames);return wrapper.call(scopeObject).call(virtualGlobal)}}directivePattern=/^['"](?:\w|\s)*['"]$/m,requirePattern=/^(?:\w*\s*(?:\w|\$|\.)*\s*=\s*)?\s*require\s*\(\s*['"]((?:\w|\$|\.|\/)+)['"]\s*\)$/m;function
getRequirements(modSrc){var result=[],stmts=modSrc.split(';'),i=0,ilen=stmts.length,m,stmt;for(;i<ilen;++i){stmt=stmts[i].trim();if(stmt!==''){if(!directivePattern.test(stmt))break}}for(;i<ilen;++i){stmt=stmts[i].trim();if(stmt!==''){m=requirePattern.exec(stmt);if(!m)break;result.push(m[1])}}return Object.freeze(result)}function
compileModule(modSrc){var moduleMaker=compile('(function() {'+modSrc+'}).call(this)');return moduleMaker.requirements=getRequirements(modSrc),Object.freeze(moduleMaker.prototype),Object.freeze(moduleMaker)}function
FakeFunction(var_args){var params=[].slice.call(arguments,0),body=params.pop(),exprSrc;return body=String(body||''),params=params.join(','),exprSrc='(function('+params+'\n){'+body+'})',compile(exprSrc)({})}FakeFunction.prototype=UnsafeFunction.prototype,FakeFunction.prototype.constructor=FakeFunction,global.Function=FakeFunction;function
fakeEval(src){try{verifyStrictExpression(src)}catch(x){src='(function() {'+src+'\n}).call(this)'}return compile(src)({})}global.eval=fakeEval,defended=WeakMap();function
def(root){var defending=WeakMap(),defendingList=[];function recur(val){if(val!==Object(val)||defended.get(val)||defending.get(val))return;defending.set(val,true),defendingList.push(val),Object.freeze(val),recur(Object.getPrototypeOf(val)),Object.getOwnPropertyNames(val).forEach(function(p){var
desc;if(typeof val==='function'&&(p==='caller'||p==='arguments'))return;desc=Object.getOwnPropertyDescriptor(val,p);if(!desc){if(TOLERATE_MISSING_DESCRIPTOR)return;fail('missing descriptor: '+p)}try{recur(desc.value),recur(desc.get),recur(desc.set)}catch(err){if(TOLERATE_FAILED_FREEZE&&err
instanceof TypeError)cajaVM.log('still diagnosing('+p+'): '+err);else throw err}})}return recur(root),defendingList.forEach(function(obj){defended.set(obj,true)}),root}global.cajaVM={'log':function(str){typeof
console!=='undefined'&&typeof console.log==='function'&&console.log(str)},'compile':compile,'compileModule':compileModule,'def':def}})(),cantNeuter=[];function
read(base,name){var desc=Object.getOwnPropertyDescriptor(base,name),result;if(desc&&'value'in
desc&&!desc.writable&&!desc.configurable)return desc.value;result=base[name];try{Object.defineProperty(base,name,{'value':result,'writable':false,'configurable':false})}catch(ex){cantNeuter.push({'base':base,'name':name,'err':ex})}return result}Object.keys(whitelist).forEach(function(name){var
desc=Object.getOwnPropertyDescriptor(global,name),permit,value;desc&&(permit=whitelist[name],permit&&(value=read(global,name),Object.defineProperty(root,name,{'value':value,'writable':false,'enumerable':desc.enumerable,'configurable':false})))}),whiteTable=WeakMap();function
register(value,permit){var oldPermit;if(value!==Object(value))return;if(typeof permit!=='object')return;oldPermit=whiteTable.get(value);if(oldPermit){debugger;return}whiteTable.set(value,permit),Object.keys(permit).forEach(function(name){var
sub;permit[name]!=='skip'&&(sub=read(value,name),register(sub,permit[name]))})}register(root,whitelist);function
isPermitted(base,name){var permit=whiteTable.get(base),result;if(permit){if(permit[name])return permit[name]};while(true){base=Object.getPrototypeOf(base);if(base===null)return false;permit=whiteTable.get(base);if(permit&&name
in permit)return result=permit[name],result==='*'||result==='skip'?result:false}}cleaning=WeakMap(),skipped=[],goodDeletions=[],badDeletions=[];function
clean(value,n){if(value!==Object(value))return;if(cleaning.get(value))return;cleaning.set(value,true),Object.getOwnPropertyNames(value).forEach(function(name){var
path=n+(n?'.':'')+name,p=isPermitted(value,name),sub,success;if(p)p==='skip'?skipped.push(path):(sub=read(value,name),clean(sub,path));else{try{success=delete
value[name]}catch(x){debugger;success=false}if(success)goodDeletions.push(path);else{debugger;badDeletions.push(path)}}}),value!==FREEZE_EARLY&&Object.freeze(value)}FREEZE_EARLY&&Object.freeze(FREEZE_EARLY),clean(root,'');function
reportDiagnosis(desc,problemList){return problemList.length===0?false:(cajaVM.log(desc+': '+problemList.sort().join(' ')),true)}reportDiagnosis('Deleted',goodDeletions),cantNeuter.length>=1&&(complaint=cantNeuter.map(function(p){var
desc=Object.getPropertyDescriptor(p.base,p.name);return desc?p.name+'('+p.err+'): '+Object.getOwnPropertyNames(desc).map(function(attrName){var
v=desc[attrName];return v===Object(v)&&(v='a '+typeof v),attrName+': '+v}).join(', '):'  Missing '+p.name}),reportDiagnosis('Can\'t neuter',complaint)),reportDiagnosis('Can\'t delete',badDeletions)||(cajaVM.log('success'),dirty=false)}(function(){'use strict';startSES(window,whitelist,atLeastFreeVarNames)})()}