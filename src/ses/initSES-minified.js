{var Function,RegExp,WeakMap,cajaVM,eval,ses;ses||(ses={}),(function(){'use strict';var
logger;function logNowhere(str){}ses.logger?(logger=ses.logger):typeof console!=='undefined'&&'log'in
console?(logger={'log':function(str){console.log(str)},'info':function(str){console.info(str)},'warn':function(str){console.warn(str)},'error':function(str){console.error(str)}}):(logger={'log':logNowhere,'info':logNowhere,'warn':logNowhere,'error':logNowhere});function
defaultClassify(postSeverity){var MAX_SES_SAFE=ses.severities.SAFE_SPEC_VIOLATION,consoleLevel='log',note='';return postSeverity.level>ses.severities.SAFE.level&&(consoleLevel='info',note=postSeverity.description+'('+postSeverity.level+')',postSeverity.level>ses.maxAcceptableSeverity.level?(consoleLevel='error',note+=' is not suitable for SES'):postSeverity.level>MAX_SES_SAFE.level&&(consoleLevel='warn',note+=' is not SES-safe'),note+='.'),{'consoleLevel':consoleLevel,'note':note}}logger.classify||(logger.classify=defaultClassify);function
defaultReportRepairs(reports){}logger.reportRepairs||(logger.reportRepairs=defaultReportRepairs);function
defaultReportMax(){var maxClassification;ses.maxSeverity.level>ses.severities.SAFE.level&&(maxClassification=ses.logger.classify(ses.maxSeverity),logger[maxClassification.consoleLevel]('Max Severity: '+maxClassification.note))}logger.reportMax||(logger.reportMax=defaultReportMax);function
defaultReportDiagnosis(severity,status,problemList){var classification=ses.logger.classify(severity);ses.logger[classification.consoleLevel](problemList.length+' '+status)}logger.reportDiagnosis||(logger.reportDiagnosis=defaultReportDiagnosis),ses.logger=logger})(),(function(global){'use strict';var
BOGUS_BOUND_PROTOTYPE,NEEDS_DUMMY_SETTER_repaired,apply,baseKludges,call,concat,defProp,getPrototypeOf,hop,logger,maxSev,objToString,reports,severities,slice,statuses,supportedKludges;ses.severities={'SAFE':{'level':0,'description':'Safe'},'SAFE_SPEC_VIOLATION':{'level':1,'description':'Safe spec violation'},'UNSAFE_SPEC_VIOLATION':{'level':2,'description':'Unsafe spec violation'},'NOT_OCAP_SAFE':{'level':3,'description':'Not ocap safe'},'NOT_ISOLATED':{'level':4,'description':'Not isolated'},'NEW_SYMPTOM':{'level':5,'description':'New symptom'},'NOT_SUPPORTED':{'level':6,'description':'Not supported'}},ses.statuses={'ALL_FINE':'All fine','REPAIR_FAILED':'Repair failed','NOT_REPAIRED':'Not repaired','REPAIRED_UNSAFELY':'Repaired unsafely','REPAIRED':'Repaired','ACCIDENTALLY_REPAIRED':'Accidentally repaired','BROKEN_BY_OTHER_ATTEMPTED_REPAIRS':'Broken by other attempted repairs'},logger=ses.logger,ses.maxSeverity=ses.severities.SAFE;if(ses.maxAcceptableSeverityName){maxSev=ses.severities[ses.maxAcceptableSeverityName];if(maxSev&&typeof
maxSev.level==='number'&&maxSev.level>=ses.severities.SAFE.level&&maxSev.level<ses.severities.NOT_SUPPORTED.level);else
logger.error('Ignoring bad maxAcceptableSeverityName: '+ses.maxAcceptableSeverityName+'.'),ses.maxAcceptableSeverityName='SAFE_SPEC_VIOLATION'}else
ses.maxAcceptableSeverityName='SAFE_SPEC_VIOLATION';ses.maxAcceptableSeverity=ses.severities[ses.maxAcceptableSeverityName],ses.ok=function(){return ses.maxSeverity.level<=ses.maxAcceptableSeverity.level};function
test_MISSING_GETOWNPROPNAMES(){return!('getOwnPropertyNames'in Object)}function
test_GLOBAL_LEAKS_FROM_GLOBAL_FUNCTION_CALLS(){var that;return global.___global_test_function___=function(){return this},that=___global_test_function___(),delete
global.___global_test_function___,that===void 0?false:that===global?true:'This leaked as: '+that}function
test_GLOBAL_LEAKS_FROM_ANON_FUNCTION_CALLS(){var that=(function(){return this})();return that===void
0?false:that===global?true:'This leaked as: '+that}function test_GLOBAL_LEAKS_FROM_BUILTINS(){var
v=({}).valueOf,that='dummy';try{that=v()}catch(err){return err instanceof TypeError?false:'valueOf() threw: '+err}return true}function
test_MISSING_FREEZE_ETC(){return!('freeze'in Object)}function test_MISSING_CALLEE_DESCRIPTOR(){function
foo(){}return Object.getOwnPropertyNames(foo).indexOf('callee')<0?false:foo.hasOwnProperty('callee')?'Empty strict function has own callee':true}function
test_STRICT_DELETE_RETURNS_FALSE(){var deleted;if(!RegExp.hasOwnProperty('rightContext'))return false;try{deleted=delete
RegExp.rightContext}catch(err){return err instanceof TypeError?false:'Deletion failed with: '+err}return!deleted}function
test_REGEXP_CANT_BE_NEUTERED(){var deleted;if(!RegExp.hasOwnProperty('leftContext'))return false;try{deleted=delete
RegExp.leftContext}catch(err){return err instanceof TypeError?true:'Deletion failed with: '+err}return RegExp.hasOwnProperty('leftContext')?deleted?'Deletion of RegExp.leftContext did not succeed.':true:false}function
test_REGEXP_TEST_EXEC_UNSAFE(){var match;return/foo/.test('xfoox'),match=(new RegExp('(.|\r|\n)*','').exec())[0],match==='undefined'?false:match==='xfoox'?true:'regExp.exec() does not match against \"undefined\".'}function
test_FUNCTION_PROTOTYPE_DESCRIPTOR_LIES(){function foo(){}return Object.defineProperty(foo,'prototype',{'value':{}}),foo.prototype!==Object.getOwnPropertyDescriptor(foo,'prototype').value}function
test_MISSING_BIND(){return!('bind'in Function.prototype)}function test_BIND_CALLS_APPLY(){var
answer,applyCalled,b;if(!('bind'in Function.prototype))return false;applyCalled=false;function
foo(){return[].slice.call(arguments,0).join(',')}return foo.apply=function(self,args){return applyCalled=true,Function.prototype.apply.call(this,self,args)},b=foo.bind(33,44),answer=b(55,66),applyCalled?true:answer==='44,55,66'?false:'Bind test returned \"'+answer+'\" instead of \"44,55,66\".'}function
test_BIND_CANT_CURRY_NEW(){var d,str;function construct(f,args){var bound=Function.prototype.bind.apply(f,[null].concat(args));return new
bound}try{d=construct(Date,[1957,5,27])}catch(err){return err instanceof TypeError?true:'Curries construction failed with: '+err}return str=objToString.call(d),str==='[object Date]'?false:'Unexpected: '+str}function
test_MUTABLE_DATE_PROTO(){var v;try{Date.prototype.setFullYear(1957)}catch(err){return err
instanceof TypeError?false:'Mutating Date.prototype failed with: '+err}return v=Date.prototype.getFullYear(),Date.prototype.setFullYear(NaN),v!==v&&typeof
v==='number'?false:v===1957?true:'Mutating Date.prototype did not throw'}function
test_MUTABLE_WEAKMAP_PROTO(){var v,x;if(typeof WeakMap!=='function')return false;x={};try{WeakMap.prototype.set(x,86)}catch(err){return err
instanceof TypeError?false:'Mutating WeakMap.prototype failed with: '+err}return v=WeakMap.prototype.get(x),v===86?true:'Mutating WeakMap.prototype did not throw'}function
test_NEED_TO_WRAP_FOREACH(){if(!('freeze'in Object))return false;try{return['z'].forEach(function(){Object.freeze(Array.prototype.forEach)}),false}catch(err){return err
instanceof TypeError?true:'freezing forEach failed with '+err}}function test_NEEDS_DUMMY_SETTER(){return typeof
navigator!=='undefined'&&/Chrome/.test(navigator.userAgent)&&!NEEDS_DUMMY_SETTER_repaired}NEEDS_DUMMY_SETTER_repaired=false;function
test_ACCESSORS_INHERIT_AS_OWN(){var base={},derived=Object.create(base);function
getter(){return'gotten'}return Object.defineProperty(base,'foo',{'get':getter}),!derived.hasOwnProperty('foo')&&Object.getOwnPropertyDescriptor(derived,'foo')===void
0&&Object.getOwnPropertyNames(derived).indexOf('foo')<0?false:!derived.hasOwnProperty('foo')||Object.getOwnPropertyDescriptor(derived,'foo').get!==getter||Object.getOwnPropertyNames(derived).indexOf('foo')<0?'Accessor properties partially inherit as own properties.':(Object.defineProperty(base,'bar',{'get':getter,'configurable':true}),!derived.hasOwnProperty('bar')&&Object.getOwnPropertyDescriptor(derived,'bar')===void
0&&Object.getOwnPropertyNames(derived).indexOf('bar')<0?true:'Accessor properties inherit as own even if configurable.')}function
test_SORT_LEAKS_GLOBAL(){var that='dummy';return[2,3].sort(function(x,y){return that=this,x-y}),that===void
0?false:that!==global?'sort called comparefn with \"this\" === '+that:true}function
test_REPLACE_LEAKS_GLOBAL(){var that='dummy';function capture(){return that=this,'y'}return'x'.replace(/x/,capture),that===void
0?false:that===capture?true:that!==global?'Replace called replaceValue function with \"this\" === '+that:true}function
test_CANT_HASOWNPROPERTY_CALLER(){var answer=void 0;try{answer=(function(){}).hasOwnProperty('caller')}catch(err){return err
instanceof TypeError?true:'hasOwnProperty failed with: '+err}return answer?false:'strict_function.hasOwnProperty(\"caller\") was false'}function
has(base,name,baseDesc){var result=void 0,finallySkipped=true;try{result=name in
base}catch(err){return logger.error('New symptom (a): (\''+name+'\' in <'+baseDesc+'>) threw: '+err),result=false,false}finally{finallySkipped=false,result===void
0&&logger.error('New symptom (b): (\''+name+'\' in <'+baseDesc+'>) failed')}return finallySkipped&&logger.error('New symptom (e): (\''+name+'\' in <'+baseDesc+'>) finally inner finally skipped'),!!result}function
test_CANT_IN_CALLER(){var answer=void 0;try{answer=has(function(){},'caller','strict_function')}catch(err){return err
instanceof TypeError?true:'(\"caller\" in strict_func) failed with: '+err}finally{}return answer?false:'(\"caller\" in strict_func) was false.'}function
test_CANT_IN_ARGUMENTS(){var answer=void 0;try{answer=has(function(){},'arguments','strict_function')}catch(err){return err
instanceof TypeError?true:'(\"arguments\" in strict_func) failed with: '+err}finally{}return answer?false:'(\"arguments\" in strict_func) was false.'}function
has2(base,name,baseDesc){var result=void 0,finallySkipped=true;try{result=has(base,name,baseDesc)}catch(err){return result=false,false}finally{finallySkipped=false,result===void
0&&logger.error('New symptom (d): (\''+name+'\' in <'+baseDesc+'>) failed')}return finallySkipped&&logger.error('New symptom (f): (\''+name+'\' in <'+baseDesc+'>) finally outer finally skipped'),!!result}function
test_BUILTIN_LEAKS_CALLER(){var map=Array.prototype.map,caller,testfn;if(!has(map,'caller','a builtin'))return false;try{delete
map.caller}catch(err){}if(!has(map,'caller','a builtin'))return false;function foo(){return map.caller}testfn=Function('f','return [1].map(f)[0];');try{caller=testfn(foo)}catch(err){return err
instanceof TypeError?false:'Built-in \"caller\" failed with: '+err}return null===caller||void
0===caller?false:testfn===caller?true:'Unexpected \"caller\": '+caller}function
test_BUILTIN_LEAKS_ARGUMENTS(){var map=Array.prototype.map,args,testfn;if(!has(map,'arguments','a builtin'))return false;try{delete
map.arguments}catch(err){}if(!has(map,'arguments','a builtin'))return false;function
foo(){return map.arguments}testfn=Function('f','return [1].map(f)[0];');try{args=testfn(foo)}catch(err){return err
instanceof TypeError?false:'Built-in \"arguments\" failed with: '+err}return!(args===void
0||args===null)}function test_BOUND_FUNCTION_LEAKS_CALLER(){var bar,caller,testfn;if(!('bind'in
Function.prototype))return false;function foo(){return bar.caller}bar=foo.bind({});if(!has2(bar,'caller','a bound function'))return false;try{delete
bar.caller}catch(err){}if(!has2(bar,'caller','a bound function'))return'\"caller\" on bound functions can be deleted.';testfn=Function('f','return f();');try{caller=testfn(bar)}catch(err){return err
instanceof TypeError?false:'Bound function \"caller\" failed with: '+err}return[testfn,void
0,null].indexOf(caller)>=0?false:'Unexpected \"caller\": '+caller}function test_BOUND_FUNCTION_LEAKS_ARGUMENTS(){var
args,bar,testfn;if(!('bind'in Function.prototype))return false;function foo(){return bar.arguments}bar=foo.bind({});if(!has2(bar,'arguments','a bound function'))return false;try{delete
bar.arguments}catch(err){}if(!has2(bar,'arguments','a bound function'))return'\"arguments\" on bound functions can be deleted.';testfn=Function('f','return f();');try{args=testfn(bar)}catch(err){return err
instanceof TypeError?false:'Bound function \"arguments\" failed with: '+err}return!(args===void
0||args===null)}function test_JSON_PARSE_PROTO_CONFUSION(){var x;try{x=JSON.parse('{\"__proto__\":[]}')}catch(err){return err
instanceof TypeError?false:'JSON.parse failed with: '+err}return Object.getPrototypeOf(x)!==Object.prototype?true:Array.isArray(x.__proto__)?false:'JSON.parse did not set \"__proto__\" as a regular property'}function
test_PROTO_NOT_FROZEN(){var x=Object.preventExtensions({}),y;if(x.__proto__===void
0&&!('__proto__'in x))return false;y={};try{x.__proto__=y}catch(err){return err
instanceof TypeError?false:'Mutating __proto__ failed with: '+err}return y.isPrototypeOf(x)?true:'Mutating __proto__ neither failed nor succeeded'}function
test_STRICT_EVAL_LEAKS_GLOBALS(){return eval('\"use strict\"; var ___global_test_variable___ = 88;'),'___global_test_variable___'in
global?(delete global.___global_test_variable___,true):false}call=Function.prototype.call,apply=Function.prototype.apply,hop=Object.prototype.hasOwnProperty,objToString=Object.prototype.toString,slice=Array.prototype.slice,concat=Array.prototype.concat,defProp=Object.defineProperty,getPrototypeOf=Object.getPrototypeOf;function
repair_MISSING_CALLEE_DESCRIPTOR(){var realGOPN=Object.getOwnPropertyNames;Object.getOwnPropertyNames=function
calleeFix(base){var result=realGOPN(base),i;return typeof base==='function'&&(i=result.indexOf('callee'),i>=0&&!hop.call(base,'callee')&&result.splice(i,1)),result}}function
repair_REGEXP_CANT_BE_NEUTERED(){var UnsafeRegExp=RegExp,FakeRegExp=function(pattern,flags){switch(arguments.length){case
0:return UnsafeRegExp();case 1:return UnsafeRegExp(pattern);default:return UnsafeRegExp(pattern,flags)}};FakeRegExp.prototype=UnsafeRegExp.prototype,FakeRegExp.prototype.constructor=FakeRegExp,RegExp=FakeRegExp}function
repair_REGEXP_TEST_EXEC_UNSAFE(){var unsafeRegExpExec=RegExp.prototype.exec,unsafeRegExpTest;unsafeRegExpExec.call=call,unsafeRegExpTest=RegExp.prototype.test,unsafeRegExpTest.call=call,RegExp.prototype.exec=function
fakeExec(specimen){return unsafeRegExpExec.call(this,String(specimen))},RegExp.prototype.test=function
fakeTest(specimen){return unsafeRegExpTest.call(this,String(specimen))}}function
patchMissingProp(base,name,missingFunc){name in base||defProp(base,name,{'value':missingFunc,'writable':true,'enumerable':false,'configurable':true})}function
repair_MISSING_FREEZE_ETC(){patchMissingProp(Object,'freeze',function fakeFreeze(obj){return obj}),patchMissingProp(Object,'seal',function
fakeSeal(obj){return obj}),patchMissingProp(Object,'preventExtensions',function
fakePreventExtensions(obj){return obj}),patchMissingProp(Object,'isFrozen',function
fakeIsFrozen(obj){return false}),patchMissingProp(Object,'isSealed',function fakeIsSealed(obj){return false}),patchMissingProp(Object,'isExtensible',function
fakeIsExtensible(obj){return true})}BOGUS_BOUND_PROTOTYPE={'toString':function(){return'bogus bound prototype'}},Object.freeze&&Object.freeze(BOGUS_BOUND_PROTOTYPE);function
repair_MISSING_BIND(){defProp(Function.prototype,'bind',{'value':function fakeBind(self,var_args){var
thisFunc=this,leftArgs=slice.call(arguments,1);function funcBound(var_args){var args;if(this===Object(this)&&Object.getPrototypeOf(this)===BOGUS_BOUND_PROTOTYPE)throw new
TypeError('Cannot emulate \"new\" on pseudo-bound function.');return args=concat.call(leftArgs,slice.call(arguments,0)),apply.call(thisFunc,self,args)}return funcBound.prototype=BOGUS_BOUND_PROTOTYPE,defProp(funcBound,'prototype',{'value':BOGUS_BOUND_PROTOTYPE,'writable':false,'configurable':false}),funcBound},'writable':true,'enumerable':false,'configurable':true})}function
makeMutableProtoPatcher(constr,classString){var proto=constr.prototype,baseToString=objToString.call(proto);if(baseToString!=='[object '+classString+']')throw new
TypeError('unexpected: '+baseToString);if(getPrototypeOf(proto)!==Object.prototype)throw new
TypeError('unexpected inheritance: '+classString);function mutableProtoPatcher(name){var
originalMethod;if(!hop.call(proto,name))return;originalMethod=proto[name],originalMethod.apply=apply;function
replacement(var_args){var parent=getPrototypeOf(this),thisToString;if(objToString.call(parent)!==baseToString)throw thisToString=objToString.call(this),thisToString===baseToString?new
TypeError('May not mutate internal state of a '+classString+'.prototype'):new TypeError('Unexpected: '+thisToString);return originalMethod.apply(this,arguments)}defProp(proto,name,{'value':replacement})}return mutableProtoPatcher}function
repair_MUTABLE_DATE_PROTO(){['setYear','setTime','setFullYear','setUTCFullYear','setMonth','setUTCMonth','setDate','setUTCDate','setHours','setUTCHours','setMinutes','setUTCMinutes','setSeconds','setUTCSeconds','setMilliseconds','setUTCMilliseconds'].forEach(makeMutableProtoPatcher(Date,'Date'))}function
repair_MUTABLE_WEAKMAP_PROTO(){['set','delete'].forEach(makeMutableProtoPatcher(WeakMap,'WeakMap'))}function
repair_NEED_TO_WRAP_FOREACH(){(function(){var forEach=Array.prototype.forEach;defProp(Array.prototype,'forEach',{'value':function
forEachWrapper(callbackfn,opt_thisArg){return apply.call(forEach,this,arguments)}})})()}function
repair_NEEDS_DUMMY_SETTER(){(function(){var defProp=Object.defineProperty,gopd=Object.getOwnPropertyDescriptor,freeze=Object.freeze,complained=false;defProp(Object,'defineProperty',{'value':function(base,name,desc){var
fullDesc,oldDesc,testBase;function dummySetter(newValue){if(name==='ident___')complained||(logger.warn('Undiagnosed call to setter for ident___'),complained=true);else
throw new TypeError('Cannot set \".'+name+'\"')}return freeze(dummySetter.prototype),freeze(dummySetter),oldDesc=gopd(base,name),testBase={},oldDesc&&defProp(testBase,name,oldDesc),defProp(testBase,name,desc),fullDesc=gopd(testBase,name),'get'in
fullDesc&&fullDesc.set===void 0&&(fullDesc.set=dummySetter),defProp(base,name,fullDesc)}}),NEEDS_DUMMY_SETTER_repaired=true})()}function
repair_ACCESSORS_INHERIT_AS_OWN(){(function(){var defProp=Object.defineProperty,freeze=Object.freeze,seal=Object.seal,gopn=Object.getOwnPropertyNames,gopd=Object.getOwnPropertyDescriptor,complaint='Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=637994  prohibits enumerable non-configurable accessor properties.';function
isBadAccessor(derived,name){var desc=gopd(derived,name),base,superDesc;return!desc||!('get'in
desc)?false:(base=getPrototypeOf(derived),base?(superDesc=gopd(base,name),!superDesc||!('get'in
superDesc)?false:desc.get&&!desc.configurable&&!superDesc.configurable&&desc.get===superDesc.get&&desc.set===superDesc.set&&desc.enumerable===superDesc.enumerable):false)}defProp(Object,'defineProperty',{'value':function
definePropertyWrapper(base,name,desc){var oldDesc=gopd(base,name),testBase={},fullDesc;oldDesc&&!isBadAccessor(base,name)&&defProp(testBase,name,oldDesc),defProp(testBase,name,desc),fullDesc=gopd(testBase,name);if('get'in
fullDesc&&fullDesc.enumerable&&!fullDesc.configurable)throw logger.warn(complaint),new
TypeError(complaint+' (Object: '+base+' Property: '+name+')');return defProp(base,name,fullDesc)}});function
ensureSealable(base){gopn(base).forEach(function(name){var desc=gopd(base,name);if('get'in
desc&&desc.enumerable)throw desc.configurable||logger.error('New symptom: \"'+name+'\" already non-configurable'),logger.warn(complaint),new
TypeError(complaint+' (During sealing. Object: '+base+' Property: '+name+')')})}defProp(Object,'freeze',{'value':function
freezeWrapper(base){return ensureSealable(base),freeze(base)}}),defProp(Object,'seal',{'value':function
sealWrapper(base){return ensureSealable(base),seal(base)}}),defProp(Object.prototype,'hasOwnProperty',{'value':function
hasOwnPropertyWrapper(name){return hop.call(this,name)&&!isBadAccessor(this,name)}}),defProp(Object,'getOwnPropertyDescriptor',{'value':function
getOwnPropertyDescriptorWrapper(base,name){return isBadAccessor(base,name)?void 0:gopd(base,name)}}),defProp(Object,'getOwnPropertyNames',{'value':function
getOwnPropertyNamesWrapper(base){return gopn(base).filter(function(name){return!isBadAccessor(base,name)})}})})()}function
repair_SORT_LEAKS_GLOBAL(){(function(){var unsafeSort=Array.prototype.sort;unsafeSort.call=call;function
sortWrapper(opt_comparefn){function comparefnWrapper(x,y){return opt_comparefn(x,y)}return arguments.length===0?unsafeSort.call(this):unsafeSort.call(this,comparefnWrapper)}defProp(Array.prototype,'sort',{'value':sortWrapper})})()}function
repair_REPLACE_LEAKS_GLOBAL(){(function(){var unsafeReplace=String.prototype.replace;unsafeReplace.call=call;function
replaceWrapper(searchValue,replaceValue){var safeReplaceValue=replaceValue;function
replaceValueWrapper(m1,m2,m3){return replaceValue(m1,m2,m3)}return typeof replaceValue==='function'&&(safeReplaceValue=replaceValueWrapper),unsafeReplace.call(this,searchValue,safeReplaceValue)}defProp(String.prototype,'replace',{'value':replaceWrapper})})()}function
repair_CANT_HASOWNPROPERTY_CALLER(){Object.prototype.hasOwnProperty=function(name){return!!Object.getOwnPropertyDescriptor(this,name)}}function
repair_JSON_PARSE_PROTO_CONFUSION(){var unsafeParse=JSON.parse;function validate(plainJSON){var
proto;if(plainJSON!==Object(plainJSON))return;proto=Object.getPrototypeOf(plainJSON);if(proto!==Object.prototype&&proto!==Array.prototype)throw new
TypeError('Parse resulted in invalid JSON. See http://code.google.com/p/v8/issues/detail?id=621');Object.keys(plainJSON).forEach(function(key){validate(plainJSON[key])})}defProp(JSON,'parse',{'value':function(text,opt_reviver){var
result=unsafeParse(text);return validate(result),opt_reviver?unsafeParse(text,opt_reviver):result},'writable':true,'enumerable':false,'configurable':true})}severities=ses.severities,statuses=ses.statuses,baseKludges=[{'description':'Missing getOwnPropertyNames','test':test_MISSING_GETOWNPROPNAMES,'repair':void
0,'preSeverity':severities.NOT_SUPPORTED,'canRepair':false,'urls':[],'sections':['15.2.3.4'],'tests':[]}],supportedKludges=[{'description':'Global object leaks from global function calls','test':test_GLOBAL_LEAKS_FROM_GLOBAL_FUNCTION_CALLS,'repair':void
0,'preSeverity':severities.NOT_ISOLATED,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=64250'],'sections':['10.2.1.2','10.2.1.2.6'],'tests':[]},{'description':'Global object leaks from anonymous function calls','test':test_GLOBAL_LEAKS_FROM_ANON_FUNCTION_CALLS,'repair':void
0,'preSeverity':severities.NOT_ISOLATED,'canRepair':false,'urls':[],'sections':[],'tests':[]},{'description':'Global object leaks from built-in methods','test':test_GLOBAL_LEAKS_FROM_BUILTINS,'repair':void
0,'preSeverity':severities.NOT_ISOLATED,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=51097','https://bugs.webkit.org/show_bug.cgi?id=58338','http://code.google.com/p/v8/issues/detail?id=1437'],'sections':['15.2.4.4'],'tests':['S15.2.4.4_A14']},{'description':'Object.freeze is missing','test':test_MISSING_FREEZE_ETC,'repair':repair_MISSING_FREEZE_ETC,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=55736'],'sections':['15.2.3.9'],'tests':[]},{'description':'Phantom callee on strict functions','test':test_MISSING_CALLEE_DESCRIPTOR,'repair':repair_MISSING_CALLEE_DESCRIPTOR,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://bugs.webkit.org/show_bug.cgi?id=55537'],'sections':['15.2.3.4'],'tests':[]},{'description':'Strict delete returned false rather than throwing','test':test_STRICT_DELETE_RETURNS_FALSE,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':[],'sections':[],'tests':[]},{'description':'Non-deletable RegExp statics are a global communication channel','test':test_REGEXP_CANT_BE_NEUTERED,'repair':repair_REGEXP_CANT_BE_NEUTERED,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':true,'urls':['https://bugzilla.mozilla.org/show_bug.cgi?id=591846','http://wiki.ecmascript.org/doku.php?id=conventions:make_non-standard_properties_configurable'],'sections':[],'tests':[]},{'description':'RegExp.exec leaks match globally','test':test_REGEXP_TEST_EXEC_UNSAFE,'repair':repair_REGEXP_TEST_EXEC_UNSAFE,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':true,'urls':['http://code.google.com/p/v8/issues/detail?id=1393','http://code.google.com/p/chromium/issues/detail?id=75740','https://bugzilla.mozilla.org/show_bug.cgi?id=635017','http://code.google.com/p/google-caja/issues/detail?id=528'],'sections':['15.10.6.2'],'tests':['S15.10.6.2_A12']},{'description':'A function.prototype\'s descriptor lies','test':test_FUNCTION_PROTOTYPE_DESCRIPTOR_LIES,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['http://code.google.com/p/v8/issues/detail?id=1530','http://code.google.com/p/v8/issues/detail?id=1570'],'sections':[],'tests':[]},{'description':'Function.prototype.bind is missing','test':test_MISSING_BIND,'repair':repair_MISSING_BIND,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://bugs.webkit.org/show_bug.cgi?id=26382','https://bugs.webkit.org/show_bug.cgi?id=42371'],'sections':['15.3.4.5'],'tests':[]},{'description':'Function.prototype.bind calls .apply rather than [[Call]]','test':test_BIND_CALLS_APPLY,'repair':repair_MISSING_BIND,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['http://code.google.com/p/v8/issues/detail?id=892','http://code.google.com/p/v8/issues/detail?id=828'],'sections':['15.3.4.5.1'],'tests':[]},{'description':'Function.prototype.bind does not curry construction','test':test_BIND_CANT_CURRY_NEW,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=26382#c29'],'sections':['15.3.4.5.2'],'tests':[]},{'description':'Date.prototype is a global communication channel','test':test_MUTABLE_DATE_PROTO,'repair':repair_MUTABLE_DATE_PROTO,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':true,'urls':['http://code.google.com/p/google-caja/issues/detail?id=1362'],'sections':['15.9.5'],'tests':[]},{'description':'WeakMap.prototype is a global communication channel','test':test_MUTABLE_WEAKMAP_PROTO,'repair':repair_MUTABLE_WEAKMAP_PROTO,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':true,'urls':['https://bugzilla.mozilla.org/show_bug.cgi?id=656828'],'sections':[],'tests':[]},{'description':'Array forEach cannot be frozen while in progress','test':test_NEED_TO_WRAP_FOREACH,'repair':repair_NEED_TO_WRAP_FOREACH,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['http://code.google.com/p/v8/issues/detail?id=1447'],'sections':['15.4.4.18'],'tests':['S15.4.4.18_A1','S15.4.4.18_A2']},{'description':'Workaround undiagnosed need for dummy setter','test':test_NEEDS_DUMMY_SETTER,'repair':repair_NEEDS_DUMMY_SETTER,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':[],'sections':[],'tests':[]},{'description':'Accessor properties inherit as own properties','test':test_ACCESSORS_INHERIT_AS_OWN,'repair':repair_ACCESSORS_INHERIT_AS_OWN,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://bugzilla.mozilla.org/show_bug.cgi?id=637994'],'sections':[],'tests':[]},{'description':'Array sort leaks global','test':test_SORT_LEAKS_GLOBAL,'repair':repair_SORT_LEAKS_GLOBAL,'preSeverity':severities.NOT_ISOLATED,'canRepair':true,'urls':['http://code.google.com/p/v8/issues/detail?id=1360'],'sections':['15.4.4.11'],'tests':['S15.4.4.11_A8']},{'description':'String replace leaks global','test':test_REPLACE_LEAKS_GLOBAL,'repair':repair_REPLACE_LEAKS_GLOBAL,'preSeverity':severities.NOT_ISOLATED,'canRepair':true,'urls':['http://code.google.com/p/v8/issues/detail?id=1360'],'sections':['15.5.4.11'],'tests':['S15.5.4.11_A12']},{'description':'strict_function.hasOwnProperty(\"caller\") throws','test':test_CANT_HASOWNPROPERTY_CALLER,'repair':repair_CANT_HASOWNPROPERTY_CALLER,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':true,'urls':[],'sections':[],'tests':[]},{'description':'Cannot \"in\" caller on strict function','test':test_CANT_IN_CALLER,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=63398'],'sections':[],'tests':[]},{'description':'Cannot \"in\" arguments on strict function','test':test_CANT_IN_ARGUMENTS,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=63398'],'sections':[],'tests':[]},{'description':'Built in functions leak \"caller\"','test':test_BUILTIN_LEAKS_CALLER,'repair':void
0,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':['http://code.google.com/p/v8/issues/detail?id=1548','https://bugzilla.mozilla.org/show_bug.cgi?id=591846','http://wiki.ecmascript.org/doku.php?id=conventions:make_non-standard_properties_configurable'],'sections':[],'tests':[]},{'description':'Built in functions leak \"arguments\"','test':test_BUILTIN_LEAKS_ARGUMENTS,'repair':void
0,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':['http://code.google.com/p/v8/issues/detail?id=1548','https://bugzilla.mozilla.org/show_bug.cgi?id=591846','http://wiki.ecmascript.org/doku.php?id=conventions:make_non-standard_properties_configurable'],'sections':[],'tests':[]},{'description':'Bound functions leak \"caller\"','test':test_BOUND_FUNCTION_LEAKS_CALLER,'repair':repair_MISSING_BIND,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':true,'urls':['http://code.google.com/p/v8/issues/detail?id=893','https://bugs.webkit.org/show_bug.cgi?id=63398'],'sections':['15.3.4.5'],'tests':['S15.3.4.5_A1']},{'description':'Bound functions leak \"arguments\"','test':test_BOUND_FUNCTION_LEAKS_ARGUMENTS,'repair':repair_MISSING_BIND,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':true,'urls':['http://code.google.com/p/v8/issues/detail?id=893','https://bugs.webkit.org/show_bug.cgi?id=63398'],'sections':['15.3.4.5'],'tests':['S15.3.4.5_A2']},{'description':'JSON.parse confused by \"__proto__\"','test':test_JSON_PARSE_PROTO_CONFUSION,'repair':repair_JSON_PARSE_PROTO_CONFUSION,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':true,'urls':['http://code.google.com/p/v8/issues/detail?id=621','http://code.google.com/p/v8/issues/detail?id=1310'],'sections':['15.12.2'],'tests':['S15.12.2_A1']},{'description':'Prototype still mutable on non-extensible object','test':test_PROTO_NOT_FROZEN,'repair':void
0,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=65832'],'sections':['8.6.2'],'tests':[]},{'description':'Strict eval function leaks variable definitions','test':test_STRICT_EVAL_LEAKS_GLOBALS,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['http://code.google.com/p/v8/issues/detail?id=1624'],'sections':['10.4.2.1'],'tests':[]}];function
forEach(list,callback){var i,len;for(i=0,len=list.length;i<len;++i)callback(list[i],i)}function
map(list,callback){var result=[],i,len;for(i=0,len=list.length;i<len;++i)result.push(callback(list[i],i));return result}function
testRepairReport(kludges){var beforeFailures=map(kludges,function(kludge){return kludge.test()}),repairs=[],afterFailures;return forEach(kludges,function(kludge,i){var
repair;beforeFailures[i]&&(repair=kludge.repair,repair&&repairs.lastIndexOf(repair)===-1&&(repair(),repairs.push(repair)))}),afterFailures=map(kludges,function(kludge){return kludge.test()}),map(kludges,function(kludge,i){var
status=statuses.ALL_FINE,postSeverity=severities.SAFE,beforeFailure=beforeFailures[i],afterFailure=afterFailures[i];if(beforeFailure)afterFailure?kludge.repair?(postSeverity=kludge.preSeverity,status=statuses.REPAIR_FAILED):(kludge.canRepair||(postSeverity=kludge.preSeverity),status=statuses.NOT_REPAIRED):kludge.repair?kludge.canRepair?(status=statuses.REPAIRED):(postSeverity=kludge.preSeverity,status=statuses.REPAIRED_UNSAFELY):(status=statuses.ACCIDENTALLY_REPAIRED);else
if(afterFailure)(kludge.repair||!kludge.canRepair)&&(postSeverity=kludge.preSeverity),status=statuses.BROKEN_BY_OTHER_ATTEMPTED_REPAIRS;return(typeof
beforeFailure==='string'||typeof afterFailure==='string')&&(postSeverity=severities.NEW_SYMPTOM),postSeverity.level>ses.maxSeverity.level&&(ses.maxSeverity=postSeverity),{'description':kludge.description,'preSeverity':kludge.preSeverity,'canRepair':kludge.canRepair,'urls':kludge.urls,'sections':kludge.sections,'tests':kludge.tests,'status':status,'postSeverity':postSeverity,'beforeFailure':beforeFailure,'afterFailure':afterFailure}})}try{reports=testRepairReport(baseKludges),ses.ok()&&reports.push.apply(reports,testRepairReport(supportedKludges)),logger.reportRepairs(reports)}catch(err){ses.maxSeverity.level<ses.severities.NEW_SYMPTOM.level&&(ses.maxSeverity=ses.severities.NEW_SYMPTOM),logger.error('ES5 Repair failed with: '+err)}logger.reportMax()})(this),(function(){'use strict';var
NO_IDENT,defProp,gopn,hop,originalProps;if(typeof ses!=='undefined'&&ses.ok&&!ses.ok())return;if(typeof
WeakMap==='function')return;hop=Object.prototype.hasOwnProperty,gopn=Object.getOwnPropertyNames,defProp=Object.defineProperty,originalProps={},gopn(Object).forEach(function(name){originalProps[name]=Object[name]}),NO_IDENT='noident:0';function
identity(key){var desc,name;function identGetter(){return name}if(key!==Object(key))throw new
TypeError('Not an object: '+key);return desc=originalProps.getOwnPropertyDescriptor(key,'ident___'),desc?desc.get:originalProps.isExtensible(key)?(name='hash:'+Math.random(),originalProps.freeze(identGetter.prototype),originalProps.freeze(identGetter),defProp(key,'ident___',{'get':identGetter,'set':undefined,'enumerable':false,'configurable':false}),identGetter):NO_IDENT}function
identifyFirst(base,name){var oldFunc=base[name];defProp(base,name,{'value':function(obj,var_args){return identity(obj),oldFunc.apply(this,arguments)}})}identifyFirst(Object,'freeze'),identifyFirst(Object,'seal'),identifyFirst(Object,'preventExtensions'),identifyFirst(Object,'defineProperty'),identifyFirst(Object,'defineProperties'),defProp(Object,'getOwnPropertyNames',{'value':function
fakeGetOwnPropertyNames(obj){var result=gopn(obj),i=result.indexOf('ident___');return i>=0&&result.splice(i,1),result}}),defProp(Object,'getOwnPropertyDescriptor',{'value':function
fakeGetOwnPropertyDescriptor(obj,name){return name==='ident___'?undefined:originalProps.getOwnPropertyDescriptor(obj,name)}}),'getPropertyNames'in
Object&&defProp(Object,'getPropertyNames',{'value':function fakeGetPropertyNames(obj){var
result=originalProps.getPropertyNames(obj),i=result.indexOf('ident___');return i>=0&&result.splice(i,1),result}}),'getPropertyDescriptor'in
Object&&defProp(Object,'getPropertyDescriptor',{'value':function fakeGetPropertyDescriptor(obj,name){return name==='ident___'?undefined:originalProps.getPropertyDescriptor(obj,name)}}),defProp(Object,'create',{'value':function
fakeCreate(parent,pdmap){var result=originalProps.create(parent);return identity(result),pdmap&&originalProps.defineProperties(result,pdmap),result}});function
constFunc(func){return Object.freeze(func.prototype),Object.freeze(func)}WeakMap=function(){var
identities={},values={};function find(key){var id=identity(key),i,name,opt_ids;return typeof
id==='string'?(name=id,id=key):(name=id()),opt_ids=identities[name],i=opt_ids?opt_ids.indexOf(id):-1,originalProps.freeze({'name':name,'id':id,'opt_ids':opt_ids,'i':i})}function
get___(key,opt_default){var f=find(key);return f.i>=0?values[f.name][f.i]:opt_default}function
has___(key){return find(key).i>=0}function set___(key,value){var f=find(key),ids=f.opt_ids||(identities[f.name]=[]),vals=values[f.name]||(values[f.name]=[]),i=f.i>=0?f.i:ids.length;ids[i]=f.id,vals[i]=value}function
delete___(key){var f=find(key),ids,last,vals;return f.i<0?false:(ids=f.opt_ids,last=ids.length-1,last===0?(delete
identities[f.name],delete values[f.name]):(vals=values[f.name],ids[f.i]=ids[last],vals[f.i]=vals[last],ids.splice(last),vals.splice(last)),true)}return Object.create(WeakMap.prototype,{'get___':{'value':constFunc(get___)},'has___':{'value':constFunc(has___)},'set___':{'value':constFunc(set___)},'delete___':{'value':constFunc(delete___)}})},WeakMap.prototype=Object.create(Object.prototype,{'get':{'value':function
get(key,opt_default){return this.get___(key,opt_default)},'writable':true,'configurable':true},'has':{'value':function
has(key){return this.has___(key)},'writable':true,'configurable':true},'set':{'value':function
set(key,value){this.set___(key,value)},'writable':true,'configurable':true},'delete':{'value':function
remove(key){return this.delete___(key)},'writable':true,'configurable':true}})})(),(function(){'use strict';var
s,t;ses||(ses={}),t=true,s='skip',ses.whitelist={'cajaVM':{'log':t,'def':t,'compile':t,'compileModule':t,'eval':t,'Function':t,'callWithEjector':t,'eject':t,'GuardT':{'coerce':t},'makeTableGuard':t,'Trademark':{'stamp':t},'guard':t,'passesGuard':t,'stamp':t,'makeSealerUnsealerPair':t},'WeakMap':{'prototype':{'get':t,'set':t,'has':t,'delete':t}},'Proxy':{'create':t,'createFunction':t},'escape':t,'unescape':t,'Object':{'getPropertyDescriptor':t,'getPropertyNames':t,'is':t,'prototype':{'constructor':'*','toString':'*','toLocaleString':'*','valueOf':t,'hasOwnProperty':t,'isPrototypeOf':t,'propertyIsEnumerable':t},'getPrototypeOf':t,'getOwnPropertyDescriptor':t,'getOwnPropertyNames':t,'create':t,'defineProperty':t,'defineProperties':t,'seal':t,'freeze':t,'preventExtensions':t,'isSealed':t,'isFrozen':t,'isExtensible':t,'keys':t},'NaN':t,'Infinity':t,'undefined':t,'parseInt':t,'parseFloat':t,'isNaN':t,'isFinite':t,'decodeURI':t,'decodeURIComponent':t,'encodeURI':t,'encodeURIComponent':t,'Function':{'prototype':{'apply':t,'call':t,'bind':t,'prototype':'*','length':'*','arity':s,'name':s,'isGenerator':t}},'Array':{'prototype':{'concat':t,'join':t,'pop':t,'push':t,'reverse':t,'shift':t,'slice':t,'sort':t,'splice':t,'unshift':t,'indexOf':t,'lastIndexOf':t,'every':t,'some':t,'forEach':t,'map':t,'filter':t,'reduce':t,'reduceRight':t,'length':s},'isArray':t},'String':{'prototype':{'substr':t,'anchor':t,'big':t,'blink':t,'bold':t,'fixed':t,'fontcolor':t,'fontsize':t,'italics':t,'link':t,'small':t,'strike':t,'sub':t,'sup':t,'trimLeft':t,'trimRight':t,'valueOf':t,'charAt':t,'charCodeAt':t,'concat':t,'indexOf':t,'lastIndexOf':t,'localeCompare':t,'match':t,'replace':t,'search':t,'slice':t,'split':t,'substring':t,'toLowerCase':t,'toLocaleLowerCase':t,'toUpperCase':t,'toLocaleUpperCase':t,'trim':t,'length':s},'fromCharCode':t},'Boolean':{'prototype':{'valueOf':t}},'Number':{'prototype':{'valueOf':t,'toFixed':t,'toExponential':t,'toPrecision':t},'MAX_VALUE':t,'MIN_VALUE':t,'NaN':t,'NEGATIVE_INFINITY':t,'POSITIVE_INFINITY':t},'Math':{'E':t,'LN10':t,'LN2':t,'LOG2E':t,'LOG10E':t,'PI':t,'SQRT1_2':t,'SQRT2':t,'abs':t,'acos':t,'asin':t,'atan':t,'atan2':t,'ceil':t,'cos':t,'exp':t,'floor':t,'log':t,'max':t,'min':t,'pow':t,'random':t,'round':t,'sin':t,'sqrt':t,'tan':t},'Date':{'prototype':{'getYear':t,'setYear':t,'toGMTString':t,'toDateString':t,'toTimeString':t,'toLocaleString':t,'toLocaleDateString':t,'toLocaleTimeString':t,'getTime':t,'getFullYear':t,'getUTCFullYear':t,'getMonth':t,'getUTCMonth':t,'getDate':t,'getUTCDate':t,'getDay':t,'getUTCDay':t,'getHours':t,'getUTCHours':t,'getMinutes':t,'getUTCMinutes':t,'getSeconds':t,'getUTCSeconds':t,'getMilliseconds':t,'getUTCMilliseconds':t,'getTimezoneOffset':t,'setTime':t,'setFullYear':t,'setUTCFullYear':t,'setMonth':t,'setUTCMonth':t,'setDate':t,'setUTCDate':t,'setHours':t,'setUTCHours':t,'setMinutes':t,'setUTCMinutes':t,'setSeconds':t,'setUTCSeconds':t,'setMilliseconds':t,'setUTCMilliseconds':t,'toUTCString':t,'toISOString':t,'toJSON':t},'parse':t,'UTC':t,'now':t},'RegExp':{'prototype':{'exec':t,'test':t,'source':s,'global':s,'ignoreCase':s,'multiline':s,'lastIndex':s,'sticky':s}},'Error':{'prototype':{'name':'*','message':'*'}},'EvalError':{'prototype':t},'RangeError':{'prototype':t},'ReferenceError':{'prototype':t},'SyntaxError':{'prototype':t},'TypeError':{'prototype':t},'URIError':{'prototype':t},'JSON':{'parse':t,'stringify':t}}})(),(function(){'use strict';ses||(ses={});function
LIMIT_SRC(programSrc){if(/[^\u0000-\u007f]/.test(programSrc))throw new EvalError('Non-ascii text not yet supported');if(/\\u/.test(programSrc))throw new
EvalError('Backslash-u escape encoded text not yet supported')}function SHOULD_MATCH_IDENTIFIER(){return/(\w|\$)+/g}ses.atLeastFreeVarNames=function(programSrc){var
a,name,regexp,result;programSrc=String(programSrc),LIMIT_SRC(programSrc),regexp=SHOULD_MATCH_IDENTIFIER(),result={};while(a=regexp.exec(programSrc))name=a[0],result[name]=true;return result}})(),ses.startSES=function(global,whitelist,atLeastFreeVarNames,extensions){'use strict';var
TAME_GLOBAL_EVAL,cleaning,dirty,hop,propertyReports,root,whiteTable;TAME_GLOBAL_EVAL=false,dirty=true,hop=Object.prototype.hasOwnProperty;function
fail(str){debugger;throw new EvalError(str)}typeof WeakMap==='undefined'&&fail('No built-in WeakMaps, so WeakMap.js must be loaded first'),root=Object.create(null),(function(){var
unsafeEval=eval,UnsafeFunction=Function,defended,directivePattern,extensionsRecord,requirePattern;function
verifyStrictProgram(programSrc){UnsafeFunction('\"use strict\";'+programSrc)}function
verifyStrictExpression(exprSrc){verifyStrictProgram(exprSrc+';'),verifyStrictProgram('( '+exprSrc+'\n);')}function
initGlobalProperties(from,virtualGlobal){Object.getOwnPropertyNames(from).forEach(function(name){var
desc=Object.getOwnPropertyDescriptor(from,name);desc.enumerable=false,desc.configurable=true,Object.defineProperty(virtualGlobal,name,desc)})}function
makeVirtualGlobal(env){var virtualGlobal=Object.create(null);return initGlobalProperties(root,virtualGlobal),initGlobalProperties(env,virtualGlobal),Object.freeze(virtualGlobal)}function
makeScopeObject(virtualGlobal,freeNames){var scopeObject=Object.create(virtualGlobal);return Object.keys(freeNames).forEach(function(name){name
in virtualGlobal||Object.defineProperty(scopeObject,name,{'get':function(){throw new
ReferenceError('\"'+name+'\" not in scope')},'set':function(ignored){throw new TypeError('Cannot set \"'+name+'\"')}})}),Object.freeze(scopeObject)}function
compile(exprSrc){var freeNames,wrapper,wrapperSrc;return dirty&&fail('Initial cleaning failed'),verifyStrictExpression(exprSrc),freeNames=atLeastFreeVarNames(exprSrc),wrapperSrc='(function() {   with (this) {     return function() {       \"use strict\";       return (         '+exprSrc+'\n'+'      );\n'+'    };\n'+'  }\n'+'})',wrapper=unsafeEval(wrapperSrc),function(env){var
virtualGlobal=makeVirtualGlobal(env),scopeObject=makeScopeObject(virtualGlobal,freeNames);return wrapper.call(scopeObject).call(virtualGlobal)}}directivePattern=/^['"](?:\w|\s)*['"]$/m,requirePattern=/^(?:\w*\s*(?:\w|\$|\.)*\s*=)?\s*require\s*\(\s*['"]((?:\w|\$|\.|\/)+)['"]\s*\)$/m;function
getRequirements(modSrc){var result=[],stmts=modSrc.split(';'),i=0,ilen=stmts.length,m,stmt;for(;i<ilen;++i){stmt=stmts[i].trim();if(stmt!==''){if(!directivePattern.test(stmt))break}}for(;i<ilen;++i){stmt=stmts[i].trim();if(stmt!==''){m=requirePattern.exec(stmt);if(!m)break;result.push(m[1])}}return Object.freeze(result)}function
compileModule(modSrc){var moduleMaker=compile('(function() {'+modSrc+'}).call(this)');return moduleMaker.requirements=getRequirements(modSrc),Object.freeze(moduleMaker.prototype),Object.freeze(moduleMaker)}function
FakeFunction(var_args){var params=[].slice.call(arguments,0),body=params.pop(),exprSrc;return body=String(body||''),params=params.join(','),exprSrc='(function('+params+'\n){'+body+'})',compile(exprSrc)({})}FakeFunction.prototype=UnsafeFunction.prototype,FakeFunction.prototype.constructor=FakeFunction,global.Function=FakeFunction;function
fakeEval(src){try{verifyStrictExpression(src)}catch(x){src='(function() {'+src+'\n}).call(this)'}return compile(src)({})}TAME_GLOBAL_EVAL&&(global.eval=fakeEval),defended=WeakMap();function
def(node){var defending=WeakMap(),defendingList=[];function recur(val){if(val!==Object(val)||defended.get(val)||defending.get(val))return;defending.set(val,true),defendingList.push(val),Object.freeze(val),recur(Object.getPrototypeOf(val)),Object.getOwnPropertyNames(val).forEach(function(p){var
desc;if(typeof val==='function'&&(p==='caller'||p==='arguments'))return;desc=Object.getOwnPropertyDescriptor(val,p),recur(desc.value),recur(desc.get),recur(desc.set)})}return recur(node),defendingList.forEach(function(obj){defended.set(obj,true)}),node}global.cajaVM={'log':function(str){typeof
console!=='undefined'&&'log'in console&&console.log(str)},'def':def,'compile':compile,'compileModule':compileModule,'eval':fakeEval,'Function':FakeFunction},extensionsRecord=extensions(),Object.getOwnPropertyNames(extensionsRecord).forEach(function(p){Object.defineProperty(cajaVM,p,Object.getOwnPropertyDescriptor(extensionsRecord,p))})})(),propertyReports={};function
reportProperty(severity,status,path){var group;severity.level>ses.maxSeverity.level&&(ses.maxSeverity=severity.level),group=propertyReports[status]||(propertyReports[status]={'severity':severity,'list':[]}),group.list.push(path)}function
read(base,name){var desc=Object.getOwnPropertyDescriptor(base,name),result;if(!desc)return undefined;if('value'in
desc&&!desc.writable&&!desc.configurable)return desc.value;result=base[name];try{Object.defineProperty(base,name,{'value':result,'writable':false,'configurable':false})}catch(ex){reportProperty(ses.severities.NEW_SYMPTOM,'Cannot be neutered',name)}return result}Object.keys(whitelist).forEach(function(name){var
desc=Object.getOwnPropertyDescriptor(global,name),permit,value;desc&&(permit=whitelist[name],permit&&(value=read(global,name),Object.defineProperty(root,name,{'value':value,'writable':true,'enumerable':false,'configurable':false})))}),TAME_GLOBAL_EVAL&&Object.defineProperty(root,'eval',{'value':cajaVM.eval,'writable':true,'enumerable':false,'configurable':false}),whiteTable=WeakMap();function
register(value,permit){var oldPermit;if(value!==Object(value))return;if(typeof permit!=='object')return;oldPermit=whiteTable.get(value),oldPermit&&fail('primordial reachable through multiple paths'),whiteTable.set(value,permit),Object.keys(permit).forEach(function(name){var
sub;permit[name]!=='skip'&&(sub=read(value,name),register(sub,permit[name]))})}register(root,whitelist);function
getPermit(base,name){var permit=whiteTable.get(base),result;if(permit){if(permit[name])return permit[name]};while(true){base=Object.getPrototypeOf(base);if(base===null)return false;permit=whiteTable.get(base);if(permit&&hop.call(permit,name))return result=permit[name],result==='*'||result==='skip'?result:false}}cleaning=WeakMap();function
cleanProperty(base,name,path){var deleted,desc,desc2,dummy,dummy2,err,exists;function
poison(){throw new TypeError('Cannot access property '+path)}if(typeof base==='function'&&(name==='caller'||name==='arguments')){desc=Object.getOwnPropertyDescriptor(base,name);if(typeof
desc.get==='function'&&typeof desc.set==='function'&&!desc.configurable)try{dummy=base[name]}catch(poisonedErr){if(poisonedErr
instanceof TypeError)return reportProperty(ses.severities.SAFE,'Already poisoned',path),true}}deleted=void
0,err=void 0;try{deleted=delete base[name]}catch(er){err=er}exists=hop.call(base,name);if(deleted){if(!exists)return reportProperty(ses.severities.SAFE,'Deleted',path),true;reportProperty(ses.severities.SAFE_SPEC_VIOLATION,'Bounced back',path)}else
if(deleted===false)reportProperty(ses.severities.SAFE_SPEC_VIOLATION,'Strict delete returned false rather than throwing',path);else
if(err instanceof TypeError)reportProperty(ses.severities.SAFE_SPEC_VIOLATION,'Cannot be deleted',path);else
reportProperty(ses.severities.NEW_SYMPTOM,'Delete failed with'+err,path);try{Object.defineProperty(base,name,{'get':poison,'set':poison,'enumerable':false,'configurable':false})}catch(cantPoisonErr){return reportProperty(ses.severities.NOT_ISOLATED,'Cannot be poisoned',path),false}desc2=Object.getOwnPropertyDescriptor(base,name);if(desc2.get===poison&&desc2.set===poison&&!desc2.configurable)try{dummy2=base[name]}catch(expectedErr){if(expectedErr
instanceof TypeError)return reportProperty(ses.severities.SAFE,'Successfully poisoned',path),true}return reportProperty(ses.severities.NEW_SYMTOM,'Failed to be poisoned',path),false}function
clean(value,prefix){if(value!==Object(value))return;if(cleaning.get(value))return;cleaning.set(value,true),Object.getOwnPropertyNames(value).forEach(function(name){var
path=prefix+(prefix?'.':'')+name,p=getPermit(value,name),sub;p?p==='skip'?reportProperty(ses.severities.SAFE,'Skipped',path):(sub=read(value,name),clean(sub,path)):cleanProperty(value,name,path)}),Object.freeze(value)}clean(root,''),Object.keys(propertyReports).forEach(function(status){var
group=propertyReports[status];ses.logger.reportDiagnosis(group.severity,status,group.list)}),ses.logger.reportMax(),ses.ok()?(dirty=false,ses.logger.log('initSES succeeded.')):ses.logger.error('initSES failed.')},(function(global){'use strict';if(!ses.ok())return;try{ses.startSES(global,ses.whitelist,ses.atLeastFreeVarNames,function(){return{}})}catch(err){ses.maxSeverity.level<ses.severities.NEW_SYMPTOM.level&&(ses.maxSeverity=ses.severities.NEW_SYMPTOM),logger.error('hookupSES failed with: '+err)}})(this)}